---
title: "NFL Passing"
author: "Damien Ruparal Nathan Tatko Sean Dube"
date: "11/17/2020"
output:
  rmdformats::readthedown:
    thumbnails: false
    highlight: NULL
    runtime: shiny
---
<center>

![ESPN - Damian Ruparal, Nathan Tatko, Sean Dube](https://raw.githubusercontent.com/stat231-f20/Blog-ESPN/main/images/team_image.jpeg)

</center>

## Our Mission

The ESPN PUG group wants to explore the outcomes of passing plays in the NFL 2018 season. Outcomes of plays include touchdown, safety, incomplete pass, fumble, interception, out of bounds, field goal etc. Our dataset gave information on the ball's location at a specific point in the play, the absolute yard line (line of scrimmage), yards to go, down, and direction of play. We used this data visualize where the ball was started at the beginnning of the play and where and what happened at the end of the play. 

## The Data

We gathered data from the NFL Big Bowl Data competition's dataset in Kaggle. The annual sports analytics contest from NFL Football Operations challenges talented members of the analytics community – from college students to professionals – to contribute to the NFL’s continuing evolution in the use of advanced analytics. As the NFL captures real-time data for every player, on every play, in every situation — anywhere on the field — the Big Data Bowl is the league’s next step in engaging the analytics community (NFL Ops). The data collected includes various datasets: one dataset for plays in a game, and seventeen weeks of tracking data. 

## What is so important about passing in the NFL?

Passing plays have become more common as teams can gain more yards compared to running plays. In 2018, all but one team had a passing play percentage above 50% (teamrankings.com). There were 1371 touchdowns scored and Quarterbacks threw more touchdown passes than ever before. Many people refer to the NFL as a passing league. As quarterbacks and wide receivers become more skilled we will continue to see an increase in the number of passing plays. 

## The App

To explore the outcome of passing plays, we created an app where one can input down, yards to go (short, medium, long), absolute yard line, and direction of the play. By changing these inputs, one will be able to see the outcome of every which is displayed on a cholorpleth of a football field. Events of the game are marked with different symbols. Check it out! 

```{r, echo=FALSE, include=FALSE}
library(shiny)
library(ggplot2)
library(tidyverse)
library(png)
library(grid)
```


```{r, echo=FALSE}
plot1 <- read.csv("plot1finished.csv")
footballfield <- png::readPNG("footballfield.png")
Percentages <- read.csv("percentages.csv")
togo <- c("short", "medium", "long")

direction1 <- c("left", "right")

ui <- fluidPage(
  
  titlePanel("NFL Passing"),
  
  sidebarPanel(
    sliderInput(inputId = "down1", label = "Down",
                min = 1, max = 4,
                value = 1),
    selectInput(inputId = "ToGo", label = "Yards To Go", choices = togo),
    sliderInput(inputId = "yardline", label = "Absolute Yardline",
                min = 0, max = 110,
                value = 0),
    selectInput(inputId = "direction", label = "Direction of Play", choices = direction1),
    
  ),
  mainPanel(
    tabsetPanel(
      tabPanel("Play Stats", plotOutput("Plot")
      ),
      tabPanel("Passing Statistics (2018 NFL SEASON)", DT::dataTableOutput("Table")
    )
  )
  
)
)



server <- function(input, output) {
  
  use_data <- reactive({
    data <- plot1 %>%
      filter(down == input$down1)%>%
      filter(togo == input$ToGo) %>%
      filter(absoluteYardlineNumber == input$yardline)%>%
      filter(playDirection == input$direction)
  })
  
  
  output$Plot <- renderPlot(
    
    ggplot(data = use_data(), aes_string(x = "x", y = "y", shape = "event", color = "event"))+
      annotation_custom(rasterGrob(footballfield, 
                                   width = unit(1,"npc"), 
                                   height = unit(1,"npc")), 
                        -Inf, Inf, -Inf, Inf) + 
      geom_point(size = 3)+
      xlim(0,120)+
      ylim(-5,60)
    
  )
  output$Table <- DT::renderDataTable({
    DT::datatable(Percentages)
  })
}
  
  





shinyApp(ui = ui, server = server)

```

## Our findings

## Limitations

Although each NFL team in a season plays 16 games, we must take into account that each team varies in the amount of pass plays they call, and the skill level in their receiver core, which will have a major impact in their data. Teams that have a strong receiving core, and are a pass heavy team, may have much better passing stats than teams that lack in skilled receivers and focus on running the ball, despite playing the same amount of games. Furthermore, each game is different; though each game has 4, 15 minute quarters, the clock runs differently per game. A close, highly contested game can force teams to call more timeouts, find ways to get out of bounds to stop the clock, or may even go into overtime; all result in more passing plays to try and slow down the clock. A blowout may result in more running plays to keep the game clock running and to keep the game moving, so it ends relatively quicker. Other lurking variables include strength of schedule, injuries, and coaching tendencies. A more difficult strength of schedule may result in less passing yards and passing attempts completed, as the stronger opposing defenses can disrupt the flow of an offense. A coach that relies heavily on running plays and designs his offense around running the ball will certainly decrease the amount of pass attempts completed; this does not mean that the team is worse than a team with more passing yards. For example,  the Chicago Bears only had 3699 passing yards, whereas their rival, the Green Bay Packers, had 4602 yards. The Chicago Bears had an overall record of 12-4, and the Green Bay Packers had an overall record of 6-9-1, in 2018. Injuries may also have an impact on a team that focuses on passing the ball. If either the quarterback or a strong receiver gets injured, it may have an impact on the team's passing attempts. 


## Images

![Odell Beckham Jr (WR)](https://ftw.usatoday.com/wp-content/uploads/sites/90/2014/11/ap_aptopix_cowboys_giants_football_68976850.jpg)

![Michael Thomas (WR)](https://static.clubs.nfl.com/image/private/t_editorial_landscape_12_desktop/saints/t0g9bfyocxayqta7jhpn)






